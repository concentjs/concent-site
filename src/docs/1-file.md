## welcome star
ä½ çš„starå°†æ˜¯æˆ‘æœ€å¤§çš„ç²¾ç¥é¼“åŠ±ï¼Œ[æ¬¢è¿star](https://github.com/concentjs/concent)ğŸ¥ºğŸ¥ºğŸ¥º

## åº
concentæ˜¯ä¸€ä¸ªä¸“ä¸º`react`æä¾›çŠ¶æ€ç®¡ç†æœåŠ¡çš„æ¡†æ¶ï¼Œæç‚¼ç°æœ‰å„å¤§æ¡†æ¶çš„ç²¾åï¼Œä»¥åŠç¤¾åŒºå…¬è®¤çš„æœ€ä½³å®è·µï¼Œé€šè¿‡è‰¯å¥½çš„æ¨¡å—è®¾è®¡ï¼Œæ—¢ä¿è¯reactçš„æœ€ä½³æ€§èƒ½åˆå…è®¸ç”¨æˆ·éå¸¸çµæ´»çš„è§£è€¦UIé€»è¾‘ä¸ä¸šåŠ¡é€»è¾‘çš„å…³ç³»ï¼Œä»æ•´ä½“ä¸Šæé«˜ä»£ç çš„<b>å¯è¯»æ€§</b>ã€<b>å¯ç»´æŠ¤æ€§</b>å’Œ<b>å¯æ‰©å±•æ€§</b>ã€‚

concentæºå¸¦ä»¥ä¸‹ç‰¹æ€§
* æ ¸å¿ƒapiå°‘ä¸”ç®€å•ï¼ŒåŠŸèƒ½å¼ºå¤§ï¼Œä¸Šæ‰‹å®¹æ˜“ï¼Œå…¥ä¾µå°ï¼Œå®¹æ˜“è°ƒè¯•
* æä¾›å…¨å±€æ¨¡å—åŒ–çš„å•ä¸€æ•°æ®æº
* æ”¯æŒ0å…¥ä¾µçš„æ–¹å¼ï¼Œæ¸è¿›å¼çš„é‡æ„å·²æœ‰reactä»£ç 
* å¯¹ç»„ä»¶æ‰©å±•äº†äº‹ä»¶æ€»çº¿ã€computedã€watchã€åŒå‘ç»‘å®šç­‰ç‰¹æ€§
* å®Œç¾æ”¯æŒfunctionç»„ä»¶
* åŸºäºå¼•ç”¨å®šä½å’ŒçŠ¶æ€å¹¿æ’­ï¼Œæ”¯æŒç»†ç²’åº¦çš„çŠ¶æ€è®¢é˜…ï¼Œæ¸²æŸ“æ•ˆç‡å‡ºä¼—
* æ”¯æŒä¸­é—´ä»¶ï¼Œå¯ä»¥æ‰©å±•ä½ çš„ä¸ªæ€§åŒ–æ’ä»¶å¤„ç†æ•°æ®å˜æ›´
* æ”¯æŒreact 0.10+ä»»æ„ç‰ˆæœ¬ï¼›

ä¸ºç”¨æˆ·æä¾›æ›´èˆ’é€‚å’Œç®€å•çš„reactç¼–ç ä½“éªŒ

## ç²¾å¿ƒçš„æ¨¡å—è®¾è®¡ç†å¿µ
### state
concentå¯¹æ¨¡å—çš„å®šä¹‰æ˜¯ç»è¿‡å¯¹å®é™…ä¸šåŠ¡åœºæ™¯åå¤æ€è€ƒå’Œæ¨æ•²ï¼Œæœ€ç»ˆå¾—å‡ºçš„ç­”æ¡ˆï¼Œé¦–å…ˆï¼Œæ•°æ®æ˜¯æ¨¡å—çš„çµé­‚ï¼Œæ‰¿è½½ç€å¯¹ä½ çš„åŠŸèƒ½æ¨¡å—çš„æœ€åŸºç¡€çš„å­—ç¬¦æè¿°ï¼Œç¦»å¼€æ•°æ®ï¼Œä¸€åˆ‡ä¸Šå±‚ä¸šåŠ¡åŠŸèƒ½éƒ½æ˜¯ç©ºè°ˆï¼Œæ‰€ä»¥`state`æ˜¯æ¨¡å—é‡Œçš„å¿…åŒ…å«çš„å®šä¹‰ã€‚
### reducer
ä¿®æ”¹æ•°æ®çš„æ–¹å¼çµæ´»åº¦æ˜¯concentæä¾›ç»™ç”¨æˆ·æƒŠå–œä¹‹ä¸€ï¼Œå› ä¸ºconcentçš„æ ¸å¿ƒæ˜¯é€šè¿‡æ¥ç®¡`setState`åšçŠ¶æ€ç®¡ç†ï¼Œæ‰€ä»¥ç”¨æˆ·æ¥å…¥concenté‚£ä¸€åˆ»å¯ä»¥æ— éœ€ç«‹å³æ”¹é€ ç°æœ‰çš„ä»£ç å°±èƒ½å¤Ÿäº«å—åˆ°çŠ¶æ€ç®¡ç†çš„å¥½å¤„ï¼ŒåŒæ ·çš„ï¼Œconcentä¹Ÿæ”¯æŒç”¨æˆ·å®šä¹‰[reducer](doc-core-reducer)å‡½æ•°ä¿®æ”¹çŠ¶æ€ï¼Œè¿™ä¹Ÿæ˜¯æ¨èçš„æœ€ä½³å®è·µæ–¹å¼ï¼Œå¯ä»¥å½»åº•è§£è€¦UIæ¸²æŸ“ä¸ä¸šåŠ¡é€»è¾‘ï¼Œå› ä¸º`reducer`å‡½æ•°æœ¬è´¨ä¸Šåªæ˜¯`setState`çš„å˜ç§å†™æ³•ï¼Œæ‰€ä»¥å¼ºè°ƒçš„æ˜¯æ€»æ˜¯è¿”å›éœ€è¦æ›´æ–°çš„ç‰‡æ®µçŠ¶æ€ï¼Œè€Œä¸”ç”±äºconcentæ”¯æŒ`reducer`å‡½æ•°ä¹‹é—´ç›¸äº’è°ƒç”¨ï¼Œä»»æ„ç»„åˆï¼Œæ‰€ä»¥å¯ä»¥å…è®¸ç”¨æˆ·æŒ‰éœ€ä»»æ„åˆ‡å‰²`reducer`å‡½æ•°å¯¹çŠ¶æ€çš„æ›´æ–°ç²’åº¦,ç„¶åå½¢æˆé“¾å¼è°ƒç”¨å…³ç³»ï¼Œç„¶åé€šè¿‡`dispatch`å¥æŸ„æ¥è§¦å‘`reducer`å‡½æ•°

![cc-dispatch](https://user-gold-cdn.xitu.io/2019/7/17/16bfebea587e3779?w=1270&h=539&f=png&s=34762)

å¦‚æœé“¾å¼è°ƒç”¨å±‚çº§è¿‡æ·±ï¼Œä¼šé€ æˆå¾ˆå¤šæ¬¡æ¸²æŸ“ï¼Œä»ä¸Šå›¾ä¸­å¯ä»¥çœ‹å‡ºæœ‰3ä¸ªå‡½æ•°è¿”å›æ–°çš„ç‰‡æ®µçŠ¶æ€ï¼Œé€ æˆ3æ¬¡æ¸²æŸ“ï¼Œæ‰€ä»¥`concent`ä¹ŸåŒæ ·æä¾›`lazyDispatch`å¥æŸ„æ¥è®©ç”¨æˆ·å¯ä»¥æœ‰å¤šä¸€ç§é€‰æ‹©æ¥è§¦å‘å¯¹`reducer`å‡½æ•°çš„è°ƒç”¨ï¼Œ`concent`ä¼šåœ¨è°ƒåŠ¨è¿‡ç¨‹ä¸­è‡ªåŠ¨ç¼“å­˜å½“å‰è°ƒç”¨é“¾ä¸Šæ‰€æœ‰å±äºåŒä¸€ä¸ªæ¨¡å—çš„çŠ¶æ€å¹¶åšåˆå¹¶ï¼Œç›´åˆ°è°ƒç”¨é“¾ç»“æŸï¼Œæ‰åšä¸€æ¬¡æ€§çš„æäº¤

![cc-lazy-dispatch](https://user-gold-cdn.xitu.io/2019/7/17/16bfebea58b11da3?w=1092&h=563&f=png&s=37078)
### computed
`computed`æä¾›ä¸€ä¸ªå…¥å£å®šä¹‰éœ€è¦å¯¹å‘ç”Ÿå˜åŒ–çš„keyåšè®¡ç®—çš„å‡½æ•°ï¼Œé€šå¸¸æ¥è¯´ï¼Œå¤§éƒ¨åˆ†stateçš„æ•°æ®å¹¶éæ˜¯UIæ¸²æŸ“ç›´æ¥éœ€è¦çš„æ•°æ®ï¼Œæˆ‘ä»¬é€šå¸¸éœ€è¦å¯¹å…¶åšä¸€äº›æ ¼å¼åŒ–æˆ–è€…è½¬æ¢æ“ä½œï¼Œä½†æ˜¯è¿™äº›æ“ä½œå…¶å®æ²¡æœ‰å¿…è¦å†æ¯æ¬¡æ¸²æŸ“å‰éƒ½åšä¸€éï¼Œ`computed`å°†åªå¯¹å‘ç”Ÿäº†å˜åŒ–çš„`key`è®¡ç®—å¹¶å°†å…¶ç»“æœç¼“å­˜èµ·æ¥ã€‚
### watch
`watch`å’Œ`computed`æœ€å¤§çš„ä¸åŒæ˜¯ï¼Œä¸éœ€è¦è¿”å›ä¸€ä¸ªå…·ä½“çš„ç»“æœï¼Œé€šå¸¸ç”¨äºåœ¨å…³å¿ƒæŸäº›`key`å˜åŒ–æ—¶ï¼Œåšä¸€äº›å¼‚æ­¥æ“ä½œï¼Œå°±å¯ä»¥å¯¹è¿™äº›`key`å®šä¹‰`watch`å‡½æ•°
### init
æˆ‘ä»¬çŸ¥é“stateçš„å®šä¹‰æ˜¯åŒæ­¥çš„ï¼Œ`init`å…è®¸ç”¨æˆ·æœ‰ä¸€æ¬¡å¯¹`state`åšå¼‚æ­¥è·å–å¹¶æ”¹å†™çš„æœºä¼šï¼Œæ³¨æ„ï¼Œå¦‚æœæ­¤æ—¶å­˜åœ¨ç€è¯¥æ¨¡å—çš„å®ä¾‹ï¼Œæ”¹å†™äº†æ¨¡å—çš„çŠ¶æ€åï¼Œ`concent`ä¼šè‡ªåŠ¨å°†è¿™äº›çŠ¶æ€å¹¿æ’­åˆ°å¯¹åº”çš„å®ä¾‹ä¸Šï¼ŒåŒæ ·çš„ï¼Œå¦‚æœä¸å­˜åœ¨ï¼Œåœ¨æœ‰äº›çš„è¯¥æ¨¡å—çš„å®ä¾‹ç”Ÿæˆæ—¶ï¼Œè¿™äº›å®ä¾‹å°†åŒæ­¥åˆ°æ¨¡å—æœ€æ–°çš„çŠ¶æ€ï¼Œæ‰€ä»¥å½“æˆ‘ä»¬æœ‰ä¸€äº›çŠ¶æ€ä¸æ˜¯éœ€è¦ä¾èµ–å®ä¾‹æŒ‚è½½ä¸Šä¸”è§¦å‘`componentDidMount`æ¥è·å–çš„æ—¶å€™ï¼Œå°±å¯ä»¥å°†çŠ¶æ€çš„åˆå§‹åŒ–æå‡åˆ°æ¨¡å—çš„`init`é‡Œ

![cc-lazy-dispatch](https://user-gold-cdn.xitu.io/2019/7/17/16bfebea58d9013c?w=762&h=260&f=png&s=16664)

## çµæ´»çš„æ¨¡å—å’Œç»„ä»¶æ˜ å°„å…³ç³»
æ¨¡å—æ˜¯å…ˆäºç»„ä»¶å­˜åœ¨çš„æ¦‚å¿µï¼Œå½“æˆ‘ä»¬æœ‰äº†æ¨¡å—çš„å®šä¹‰åï¼Œä¾¿å¯ä»¥å¯¹ç»„ä»¶æä¾›å¼ºæœ‰åŠ›çš„æ”¯æŒï¼Œ`concent`é‡Œé€šè¿‡`register`å‡½æ•°å°†reactç»„ä»¶æ³¨å†Œä¸ºconcentç»„ä»¶(ä¹Ÿç§°ä¹‹ä¸ºconcentç±»)

![cc-lazy-dispatch](https://user-gold-cdn.xitu.io/2019/7/17/16bfebed27c7b9d3?w=598&h=276&f=png&s=10018)

æ³¨å†Œçš„æ—¶å€™ï¼Œå¯ä»¥æŒ‡å®šä¸“å±çš„æ¨¡å—ï¼Œç†è®ºæ¥è¯´ï¼Œæˆ‘ä»¬åº”è¯¥ä¿æŒç»„ä»¶ä¸æ¨¡å—å¹²å‡€çš„å¯¹åº”å…³ç³»ï¼Œå³ä¸€ä¸ªç»„ä»¶ä¸“å±äºæŸä¸ªæ¨¡å—ï¼Œæ¶ˆè´¹çš„æ˜¯è¯¥æ¨¡å—çš„æ•°æ®ï¼Œæ“ä½œçš„æ‰€å±æ¨¡å—çš„`reducer`å‡½æ•°ï¼Œä½†æ˜¯å®é™…åœºæ™¯å¯èƒ½æœ‰ä¸å°‘ç»„ä»¶éƒ½æ˜¯è·¨å¤šä¸ªæ¨¡å—æ¶ˆè´¹å’Œä¿®æ”¹æ•°æ®çš„ï¼Œæ‰€ä»¥`concent`ä¹Ÿå…è®¸ç”¨æˆ·é€šè¿‡`connect`å®šä¹‰æ¥æŒ‡å®šç»„ä»¶è¿æ¥çš„å…¶ä»–æ¨¡å—ï¼Œå”¯ä¸€ä¸åŒçš„æ˜¯è°ƒç”¨å¥æŸ„é»˜è®¤å¸¦çš„ä¸Šä¸‹æ–‡æ˜¯æŒ‡å‘è‡ªå·±ä¸“å±æ¨¡å—çš„ï¼Œå¦‚æœéœ€è¦è°ƒç”¨å…¶ä»–æ¨¡å—çš„æ–¹æ³•ï¼Œåˆ™éœ€è¦æ˜¾ç¤ºæŒ‡å®šæ¨¡å—å
```
@register('Foo', {module:'foo', connect:{bar:'*'}})
class Foo extends Component(){
  onNameChange = (name)=>{
    this.$$dispatch('changeName', name);//é»˜è®¤è°ƒç”¨çš„fooæ¨¡å—reduceré‡Œçš„changeNameæ–¹æ³•

    this.$$dispatch('bar/changeName', name);//æŒ‡å®šbaræ¨¡å—, è°ƒç”¨baræ¨¡å—çš„reduceré‡Œçš„changeNameæ–¹æ³•ä¿®æ”¹baræ¨¡å—çš„æ•°æ®
  }
}
```
![cc-ccclass-module](https://user-gold-cdn.xitu.io/2019/7/17/16bfebef45665ecc?w=668&h=322&f=png&s=12186)
å¯¹äº`CcClass`æ¥è¯´ï¼Œå› ä¸ºè°ƒç”¨`setState`å°±èƒ½å¤Ÿä¿®æ”¹storeï¼Œæ‰€ä»¥æ•°æ®æ˜¯ç›´æ¥æ³¨å…¥åˆ°`state`é‡Œçš„ï¼Œå¯¹äºå…¶ä»–æ¨¡å—çš„æ•°æ®ï¼Œæ˜¯æ³¨å…¥åˆ°`connectedState`,è¿™æ ·æ—¢ä¿æŒäº†æ‰€å±æ¨¡å—å’Œå…¶ä»–æ¨¡å—çš„æ•°æ®éš”ç¦»ï¼Œåˆèƒ½å¤Ÿè®©ç”¨æˆ·éå¸¸æ–¹ä¾¿æ¶ˆè´¹å¤šä¸ªæ¨¡å—çš„æ•°æ®ã€‚
![cc-class-and-instance-state](https://user-gold-cdn.xitu.io/2019/7/17/16bfebef45a7809e?w=797&h=504&f=png&s=40903)

æ‰€ä»¥æ•´ä½“æ¥è¯´ï¼Œç»„ä»¶ä¸`store`ä¹‹é—´å°†æ„æˆä¸€å¼ å…³ç³»æ˜ç¡®å’Œæ¸…æ™°çš„ç»“æ„ç½‘ï¼Œæœ‰åˆ©äºç”¨æˆ·ä¸ºå¤§å‹çš„`react`å·¥ç¨‹åˆæœŸæ•´é½çš„åˆ’åˆ†ä¸šåŠ¡æ¨¡å—ï¼Œä¸­æœŸçµæ´»çš„è°ƒæ•´æ¨¡å—å®šä¹‰
![cc-class-and-store](https://user-gold-cdn.xitu.io/2019/7/17/16bfebf074609fca?w=859&h=611&f=png&s=45185)

## æ›´å‹å¥½çš„functionæ”¯æŒ
åœ¨`hook`ææ¡ˆè½åœ°åï¼Œç°æœ‰çš„reactç¤¾åŒºï¼Œå·²ç»ä»class componentæ…¢æ…¢è½¬å‘function componentå†™æ³•ï¼Œä½†æ˜¯æ­£å¦‚[Vue Function-based API RFC](https://www.jianshu.com/p/72f7e247b4b0)æ‰€è¯´ï¼Œ`hook`æ˜¾è€Œæ˜“è§çš„è¦åˆ›å»ºå¾ˆå¤šä¸´æ—¶å‡½æ•°å’Œäº§ç”Ÿå¤§é‡é—­åŒ…çš„é—®é¢˜ï¼Œä»¥åŠé€šè¿‡æä¾›è¾…åŠ©å‡½æ•°`useMemo/useCallback`ç­‰æ¥è§£å†³è¿‡åº¦æ›´æ–°æˆ–è€…æ•è·äº†è¿‡æœŸå€¼ç­‰é—®é¢˜ï¼Œæå‡ºäº†`setup`æ–¹æ¡ˆï¼Œæ¯ä¸ªç»„ä»¶å®ä¾‹åªä¼šåœ¨åˆå§‹åŒ–æ—¶è°ƒç”¨ä¸€æ¬¡ ï¼ŒçŠ¶æ€é€šè¿‡å¼•ç”¨å‚¨å­˜åœ¨ setup() çš„é—­åŒ…å†…ã€‚

ç»¼åˆä¸Šè¿°çš„`setup`æ€è·¯å’Œå¥½å¤„ï¼Œ`concent`é’ˆå¯¹`react`çš„å‡½æ•°ç»„ä»¶å¼•å…¥`setup`æœºåˆ¶å¹¶å¯¹å…¶åšäº†æ›´ä¼˜çš„æ”¹è¿›ï¼ŒåŒæ ·åœ¨åœ¨ç»„ä»¶å®ä¾‹åŒ–æ—¶åªè°ƒç”¨ä¸€æ¬¡ï¼Œå¯ä»¥å®šä¹‰å„ç§æ–¹æ³•å¹¶è¿”å›ï¼Œè¿™äº›æ–¹æ³•å°†æ”¶é›†åœ¨ä¸Šä¸‹æ–‡çš„`settings`å¯¹è±¡é‡Œï¼Œè¿˜é¢å¤–çš„å…è®¸`setup`é‡Œå®šä¹‰`effect`ã€`computed`ã€`watch`å‡½æ•°ï¼ˆå½“ç„¶ï¼Œè¿™äº›æ˜¯å®ä¾‹çº§åˆ«çš„`computed`å’Œ`watch`äº†ï¼‰

[åœ¨çº¿ç¤ºä¾‹](https://stackblitz.com/edit/cc-course-award-panel-v4?file=index.js)

### UIå®šä¹‰
```
const AwardPanelUI = (props) => {
  return (
    <div style={stBox}>
      {/** å…¶ä»–ç•¥ */}
      <div>displayBonus: {props.displayBonus}</div>
    </div>
  );
};
```
### setupå®šä¹‰
```
const setup = ctx => {
  //å®šä¹‰å‰¯ä½œç”¨ï¼Œç¬¬äºŒä½å‚æ•°å†™ç©ºæ•°ç»„ï¼Œè¡¨ç¤ºåªåœ¨ç»„ä»¶åˆæ¬¡æŒ‚è½½å®Œæ¯•åæ‰§è¡Œä¸€æ¬¡
  ctx.defineEffect(ctx => {
    ctx.dispatch('init');
    //è¿”å›æ¸…ç†å‡½æ•°ï¼Œç»„ä»¶å¸è½½æ—¶å°†è§¦å‘æ­¤å‡½æ•°
    return () => ctx.dispatch('track', 'user close award panel')
  }, []);

  /** ä¹Ÿæ”¯æŒå‡½æ•°å¼å†™æ³•
    ctx.defineWatch(ctx=>{
      return {...}
    });
   */
  ctx.defineWatch({
    //key inputCodeçš„å€¼å‘ç”Ÿå˜åŒ–æ—¶ï¼Œè§¦å‘æ­¤è§‚å¯Ÿå‡½æ•°
    'inputCode':(nevVal)=> ctx.setState({msg:'inputCode å˜ä¸º '+nevVal })
  });
  ctx.defineComputed({
    //key inputCodeçš„å€¼å‘ç”Ÿå˜åŒ–æ—¶ï¼Œè§¦å‘æ­¤è®¡ç®—å‡½æ•°
    'inputCode':(newVal)=>`${newVal}_${Date.now()}`
  });

  //å®šä¹‰handleStrChangeæ–¹æ³•
  const handleStrChange = (e) => {
    const inputCode = e.currentTarget.value;

    //ä¸¤ç§å†™æ³•ç­‰æ•ˆ
    ctx.dispatch('handleInputCodeChange', inputCode);
    // ctx.reducer.award.handleInputCodeChange(inputCode);
  }

  //å®šä¹‰initå‡½æ•°
  const init = ctx.reducer.award.init;
  //const init = ()=> ctx.dispatch('init');

  //setupä¼šå°†è¿”å›ç»“æœæ”¾ç½®åˆ°settings
  return { handleStrChange, init };
}
```

### mapPropså®šä¹‰
```
//å‡½æ•°ç»„ä»¶æ¯æ¬¡æ¸²æŸ“å‰ï¼ŒmapPropséƒ½ä¼šè¢«è°ƒç”¨ï¼Œå¸®åŠ©ç”¨æˆ·ç»„è£…æƒ³è¦çš„propsæ•°æ®
const mapProps = ctx => {
  //å°†bonusçš„è®¡ç®—ç»“æœå–å‡º
  const displayBonus = ctx.moduleComputed.bonus;
  //å°†settingsé‡Œçš„ handleStrChangeæ–¹æ³•ã€initæ–¹æ³• å–å‡º
  const { handleStrChange, init } = ctx.settings;
  //å°†inputCodeå–å‡º
  const { inputCode, awardList, mask, msg } = ctx.moduleState;

  //ä»refConnectedComputedè·å–å®ä¾‹å¯¹æ¨¡å—keyçš„è®¡ç®—å€¼
  const { inputCode:cuInputCode } = ctx.refComputed.award;

  //è¯¥è¿”å›ç»“æœä¼šæ˜ å°„åˆ°ç»„ä»¶çš„propsä¸Š
  return { msg, cuInputCode, init, mask, inputCode, awardList, displayBonus, handleStrChange }
}
```
### è¿æ¥å‡½æ•°ç»„ä»¶
```
const AwardPanel = connectDumb({setup, mapProps, module:'award'})(AwardPanelUI);
```
### hookçœŸçš„æ˜¯ç­”æ¡ˆå—
æœ‰äº†`setup`çš„æ”¯æŒï¼Œå¯ä»¥å°†è¿™äº›è¦ç”¨åˆ°æ–¹æ³•æå‡ä¸ºé™æ€çš„ä¸Šä¸‹æ–‡apiï¼Œè€Œä¸éœ€è¦åå¤é‡å®šä¹‰ï¼Œä¹Ÿä¸å­˜åœ¨å¤§é‡çš„ä¸´æ—¶é—­åŒ…é—®é¢˜ï¼ŒåŒæ—¶åŸºäºå‡½æ•°å¼çš„å†™æ³•ï¼Œå¯ä»¥æ›´çµæ´»çš„æ‹†åˆ†å’Œç»„åˆä½ çš„Uä»£ç ä¸ä¸šåŠ¡ä»£ç ï¼ŒåŒæ—¶è¿™äº›setupå‡½æ•°ï¼Œç»è¿‡è¿›ä¸€æ­¥æŠ½è±¡ï¼Œè¿˜å¯ä»¥è¢«å…¶ä»–åœ°æ–¹å¤ç”¨ã€‚

åŒæ—¶å‡½æ•°å¼ç¼–ç¨‹ä¹Ÿæ›´åˆ©äº`typescript`åšç±»å‹æ¨å¯¼ï¼Œ`concent`å¯¹å‡½æ•°ç»„ä»¶å‹å¥½æ”¯æŒï¼Œè®©ç”¨æˆ·å¯ä»¥åœ¨`class`å’Œ`function`ä¹‹é—´æŒ‰éœ€é€‰æ‹©ï¼Œ`concent`è¿˜å…è®¸å®šä¹‰`state`æ¥åšå±€éƒ¨çŠ¶æ€ç®¡ç†ï¼Œæ‰€ä»¥ç»è¿‡`connectDumb`åŒ…è£¹çš„`function`ç»„ä»¶ï¼Œæ—¢èƒ½å¤Ÿè¯»å†™æœ¬åœ°çŠ¶æ€ï¼Œåˆèƒ½å¤Ÿè¯»å†™storeçŠ¶æ€ï¼Œè¿˜æœ‰ä»€ä¹ˆæ›´å¥½çš„ç†ç”±éè¦ä½¿ç”¨`hook`ä¸å¯å‘¢ï¼Ÿ
```
const AwardPanel = connectDumb({
  //æ¨èå†™ä¸ºå‡½æ•°å¼å†™æ³•ï¼Œå› ä¸ºç›´æ¥å£°æ˜å¯¹è±¡çš„è¯ï¼Œconcentä¹Ÿä¼šå¯¹å…¶åšæ·±å…‹éš†æ“ä½œ
  //state:()=>({localName:1});
  state:{localName:1},
  setup, 
  mapProps, 
  connect:{award:'*'}
})(AwardPanelUI);

//code in setup
const setup = ctx =>{
  const changeLocalName = name => ctx.setState({localName});
  return {changeLocalName};
}

//code in mapProps
const mapProps = ctx =>{
  const localName = ctx.state.localName;
  return {localName}; 
}
```

## æ›´åŠ æ³¨é‡ä½¿ç”¨ä½“éªŒçš„æ¶æ„
å°†`concent`æ¥å…¥`react`åº”ç”¨æ˜¯éå¸¸è½»æ¾å’Œå®¹æ˜“çš„ï¼Œå¯¹äºå·²å­˜åœ¨çš„reactåº”ç”¨ï¼Œä¸éœ€è¦ä½ ä¿®æ”¹ç°æœ‰çš„reactåº”ç”¨ä»»ä½•ä»£ç ï¼Œåªéœ€è¦å…ˆå°†`concent`å¯åŠ¨èµ·æ¥ï¼Œå°±å¯ä»¥ä½¿ç”¨äº†ï¼Œä¸éœ€è¦åœ¨é¡¶å±‚åŒ…è£¹`Provider`ä¹‹ç±»çš„ç»„ä»¶æ¥æä¾›å…¨å±€ä¸Šä¸‹æ–‡ï¼Œå› ä¸ºå¯åŠ¨`concent`ä¹‹åï¼Œ`concent`è‡ªåŠ¨å°±ç»´æŠ¤ç€ä¸€ä¸ªè‡ªå·±çš„å…¨å±€ä¸Šä¸‹æ–‡ï¼Œæ‰€ä»¥ä½ å¯ä»¥ç†è§£`concent`å’Œ`react`åº”ç”¨æ˜¯ä¸€ä¸ªå¹³è¡Œçš„å…³ç³»ï¼Œè€ŒéåµŒå¥—æˆ–è€…åŒ…è£¹çš„å…³ç³»ï¼Œå”¯ä¸€æ³¨æ„çš„æ˜¯åœ¨æ¸²æŸ“`react`åº”ç”¨ä¹‹å‰ï¼Œä¼˜å…ˆå°†`concent`å¯åŠ¨å°±å¯ä»¥äº†ã€‚
![cc-struct](https://user-gold-cdn.xitu.io/2019/7/17/16bfebf400c8bcbc?w=854&h=625&f=png&s=46179)

### åˆ†ç¦»å¼çš„æ¨¡å—é…ç½®
`concent`å¹¶éè¦æ±‚ç”¨æˆ·åœ¨å¯åŠ¨æ—¶å°±é…ç½®å¥½å„ä¸ªæ¨¡å—çš„å®šä¹‰ï¼Œå…è®¸ç”¨æˆ·å®šä¹‰æŸäº›ç»„ä»¶æ—¶ï¼Œè°ƒç”¨`configure`å‡½æ•°é…ç½®æ¨¡å—ï¼Œè¿™å°†æå¤§æé«˜å®šä¹‰`page model`æˆ–è€…`component model`çš„ç¼–ç ä½“éªŒã€‚
```
.
|____page
| |____Group
| | |____index.js
| | |____model//å®šä¹‰page model
| |   |____reducer.js //å¯é€‰
| |   |____index.js
| |   |____computed.js //å¯é€‰
| |   |____state.js //å¿…åŒ…å«
| |   |____watch.js //å¯é€‰
| |   |____init.js //å¯é€‰
| |
| |____...//å„ç§pageç»„ä»¶å®šä¹‰
|
|____App.css
|____index.js
|____utils
| |____...
|____index.css
|____models// å„ç§ä¸šåŠ¡modelçš„å®šä¹‰
| |____home
| | |____reducer.js
| | |____index.js
| | |____computed.js
| | |____state.js
|
|____components
| |____Nav.js
|
|____router.js
|____logo.png
|____assets
| |____...
|____run-cc.js //å¯åŠ¨concentï¼Œåœ¨å…¥å£index.jsé‡Œç¬¬ä¸€è¡Œå°±è°ƒç”¨
|____App.js
|____index.js //é¡¹ç›®å…¥å£æ–‡ä»¶
|____services
| |____...

```
ä»¥ä¸Šå›¾ä»£ç æ–‡ä»¶ç»„ç»‡ç»“æ„ä¸ºä¾‹ï¼Œpageç»„ä»¶`Group`åŒ…å«äº†ä¸€ä¸ªè‡ªå·±çš„`model`,åœ¨`model/index.js`é‡Œå®Œæˆå®šä¹‰æ¨¡å—åˆ°`concent`çš„åŠ¨ä½œ,
```
// code in page/Group/model/index.js
import state form './state';
import * as reducer form './reducer';
import * as computed form './computed';
import * as watch form './watch';
import init form './init';
import {configure} from 'concent';

//é…ç½®æ¨¡å—åˆ°`concent`é‡Œï¼Œå‘½åä¸º'group'
configure('group', {state, reducer, computed, watch, init});
```
åœ¨Groupç»„ä»¶å¯¹å¤–æš´éœ²å‰ï¼Œå¼•å…¥ä¸€ä¸‹`model`å°±å¯ä»¥äº†
```
import './model';

@register('GroupUI', {module:'group'})
export default class extends Component {

}
```
è¿™ç§ä»£ç ç»„ç»‡æ–¹å¼ä¸ºç”¨æˆ·å‘å¸ƒæºå¸¦å®Œæ•´`model`å®šä¹‰çš„`concent`ç»„ä»¶åˆ°npmæˆä¸ºäº†å¯èƒ½ï¼Œå…¶ä»–ç”¨æˆ·åªéœ€å®‰è£…å®ƒçš„`concent`åº”ç”¨é‡Œï¼Œå®‰è£…äº†è¯¥ç»„ä»¶å°±èƒ½ç›´æ¥ä½¿ç”¨è¯¥ç»„ä»¶ï¼Œç”šè‡³ä¸ä½¿ç”¨ç»„ä»¶çš„UIé€»è¾‘ï¼Œåªæ˜¯æ³¨å†Œä»–æ–°å†™çš„ç»„ä»¶åˆ°è¯¥ç»„ä»¶æºå¸¦çš„æ¨¡å—é‡Œï¼Œå®Œå®Œå…¨å…¨å¤ç”¨æ¨¡å—çš„é™¤äº†uiçš„å…¶ä»–æ‰€æœ‰å®šä¹‰ã€‚

### æ¨¡å—å…‹éš†
å¯¹äºå·²æœ‰çš„æ¨¡å—ï¼Œæœ‰çš„æ—¶å€™æˆ‘ä»¬æƒ³å®Œå…¨çš„å¤ç”¨é‡Œé¢çš„æ‰€æœ‰å®šä¹‰ä½†æ˜¯è¿è¡Œæ—¶æ˜¯å½»åº•éš”ç¦»çš„ï¼Œå¦‚æœç”¨æœ€ç¬¨çš„æ–¹æ³•ï¼Œå°±æ˜¯å®Œå…¨copyç›®æ ‡æ¨¡å—ä¸‹çš„æ‰€æœ‰ä»£ç ï¼Œç„¶åèµ·ä¸€ä¸ªæ–°çš„åå­—ï¼Œé…ç½®åˆ°`concent`å°±å¥½äº†ï¼Œå¯æ˜¯å¦‚æœæœ‰10ä¸ªã€20ä¸ªç”šè‡³æ›´å¤šçš„ç»„ä»¶æƒ³å¤ç”¨é€»è¾‘ä½†æ˜¯ä¿æŒè¿è¡Œæ—¶éš”ç¦»æ€ä¹ˆåŠå‘¢ï¼Ÿæ˜¾ç„¶å¤åˆ¶å¤šä»½ä»£ç æ˜¯è¡Œä¸é€šçš„ï¼Œ`concent`æä¾›`cloneModule`å‡½æ•°å¸®åŠ©ä½ å®Œæˆæ­¤ç›®çš„ï¼Œå®é™…ä¸Š`cloneModule`å‡½æ•°åªæ˜¯å¯¹`state`åšäº†ä¸€ä¸ªæ·±æ‹·è´ï¼Œå…¶ä»–çš„å› ä¸ºéƒ½æ˜¯å‡½æ•°å®šä¹‰ï¼Œæ‰€ä»¥åªæ˜¯è®©æ–°æ¨¡å—æŒ‡å‘é‚£äº›å‡½æ•°çš„å¼•ç”¨ã€‚

åŸºäº`cloneModule`å¯ä»¥åœ¨è¿è¡Œæ—¶ä»»æ„æ—¶é—´è°ƒç”¨çš„ç‰¹æ€§ï¼Œä½ ç”šè‡³å¯ä»¥å†™ä¸€ä¸ªå·¥å‚å‡½æ•°ï¼ŒåŠ¨æ€åˆ›è§£ç»‘å®šäº†æ–°æ¨¡å—çš„ç»„ä»¶ï¼
```
//makeComp.js
import existingModule from './demoModel';
import { register, cloneModule } from 'concent';

const module_comp_= {};//è®°å½•æŸä¸ªæ¨¡å—æœ‰æ²¡æœ‰å¯¹åº”çš„ç»„ä»¶

class Comp extends Component(){
  //......
}

export makeComp(module, CompCcClassName){
  let TargetComp = module_comp_[module];
  if(TargetComp) return TargetComp;

  //å…ˆåŸºäºå·²æœ‰æ¨¡å—å…‹éš†æ–°æ¨¡å—
  cloneModule(module, existingModule);

  //å› ä¸ºmoduleæ˜¯ä¸èƒ½é‡å¤çš„ï¼ŒccClassNameä¹Ÿæ˜¯ä¸èƒ½é‡å¤çš„ï¼Œ
  //æ‰€æœ‰ç”¨æˆ·å¦‚æœæ²¡æœ‰æ˜¾å¼æŒ‡å®šccClassNameå€¼çš„è¯ï¼Œå¯ä»¥é»˜è®¤ccClassNameç­‰äºmoduleå€¼
  const ccClassName = CompCcClassName || module;

  //æ³¨å†ŒCompåˆ°æ–°æ¨¡å—é‡Œ
  TargetComp = register(ccClassName, {module})(Comp);
  //ç¼“å­˜èµ·æ¥
  module_comp_[module] = TargetComp;

  return TargetComp;
}

```

## concentç»„ä»¶å·¥ä½œæµç¨‹
concentç»„ä»¶å¹¶éé­”æ”¹äº†reactç»„ä»¶ï¼Œåªæ˜¯åœ¨reactç»„ä»¶ä¸Šåšäº†ä¸€å±‚è¯­æ³•ç³–å°è£…ï¼Œæ•´ä¸ªreactç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸä¾ç„¶éœ€è¦è¢«ä½ äº†è§£ï¼Œè€Œ`concentDumb`å°†åŸç”Ÿå‘½å‘¨æœŸåšäº†å·§å¦™çš„æŠ½è±¡ï¼Œæ‰å¾—ä»¥ä½¿ç”¨`defineEffect`ã€`defineWatch`ã€`defineComputed`ç­‰æœ‰è¶£çš„åŠŸèƒ½è€Œæ— éœ€åœ¨å…³æ³¨ç±»ç»„ä»¶çš„ç”Ÿå‘½å‘¨æœŸï¼Œæ— éœ€å†å’Œ`this`æ‰“äº¤é“ï¼Œè®©å‡½æ•°ç»„ä»¶å’Œç±»ç»„ä»¶æ‹¥æœ‰å®Œå…¨å¯¹ç­‰çš„åŠŸèƒ½ã€‚
![cc-process](https://user-gold-cdn.xitu.io/2019/7/17/16bfebf9988c356f?w=1269&h=883&f=png&s=121472)

## å¯¹æ¯”ä¸»æµçŠ¶æ€ç®¡ç†æ–¹æ¡ˆ
æˆ‘ä»¬çŸ¥é“ï¼Œç°æœ‰çš„çŠ¶æ€æ¡†æ¶ï¼Œä¸»è¦æœ‰ä¸¤å¤§ç±»å‹ï¼Œä¸€ä¸ªæ˜¯`redux`ä¸ºä»£è¡¨çš„åŸºäºå¯¹æ•°æ®è®¢é˜…çš„æ¨¡å¼æ¥åšçŠ¶æ€å…¨å±€ç®¡ç†ï¼Œä¸€ç§æ˜¯ä»¥`mobx`ä¸ºä»£è¡¨çš„å°†æ•°æ®è½¬å˜ä¸ºå¯è§‚å¯Ÿå¯¹è±¡æ¥åšä¸»åŠ¨å¼çš„å˜æ›´æ‹¦æˆªä»¥åŠçŠ¶æ€åŒæ­¥ã€‚

## vs redux
æˆ‘ä»¬å…ˆèŠä¸€èŠ`redux`ï¼Œè¿™ä¸ªå½“å‰`react`ç•ŒçŠ¶æ€ç®¡ç†çš„ä¸€å“¥ã€‚
### reduxéš¾ä»¥è¨€è¯­çš„reducer
å†™è¿‡`redux`çš„ç”¨æˆ·ï¼Œæˆ–è€…`redux wrapper`ï¼ˆå¦‚`dva`ã€`rematch`ç­‰ï¼‰çš„ç”¨æˆ·ï¼Œéƒ½åº”è¯¥å¾ˆæ¸…æ¥š `redux`çš„ä¸€ä¸ªçº¦å®šï¼š`reducer`å¿…éœ€æ˜¯çº¯å‡½æ•°ï¼Œå¦‚æœçŠ¶æ€æ”¹å˜äº†ï¼Œå¿…éœ€è§£æ„åŸ`state`è¿”å›ä¸€ä¸ªæ–°çš„`state`
```
// fooReducer.js
export default (state, action)=>{
  switch(action.type){
    case 'FETCH_BOOKS':
      return {...state, ...action.payload};
    default:
      return state;
  }
}
```
çº¯å‡½æ•°æ²¡æœ‰å‰¯ä½œç”¨ï¼Œå®¹æ˜“è¢«æµ‹è¯•çš„ç‰¹ç‚¹è¢«æèµ·è¿‡å¾ˆå¤šæ¬¡ï¼Œæˆ‘ä»¬å†™ç€å†™ç€ï¼Œå¯¹äº`actionCreator`å’Œ`reducer`ï¼Œæœ‰äº†ä¸¤ç§æµæ´¾çš„å†™æ³•ï¼Œ
- ä¸€ç§æ˜¯å°†å¼‚æ­¥çš„è¯·æ±‚é€»è¾‘ä»¥åŠè¯·æ±‚åçš„æ•°æ®å¤„ç†é€»è¾‘ï¼Œéƒ½æ”¾åœ¨`actionCreator`å†™å®Œäº†ï¼Œç„¶åå°†æ•°æ®å°è£…ä¸º`payload`,è°ƒç”¨`dispatch`,
è®²æ•°æ®æ´¾å‘ç»™å¯¹åº”çš„`reducer`ã€‚

> æ­¤ç§æµæ´¾ä»£ç ï¼Œæ…¢æ…¢å˜æˆ`reducer`é‡Œå…¨æ˜¯è§£æ„`payload`ç„¶ååˆæˆæ–°çš„`state`å¹¶è¿”å›çš„æ“ä½œï¼Œä¸šåŠ¡é€»è¾‘å…¨éƒ¨åœ¨
`actionCreator`é‡Œäº†ï¼Œæ­¤ç§æœ‰ä¸€ä¸ªæœ‰ä¸€ä¸ªä¸¥é‡çš„å¼Šç«¯ï¼Œå› ä¸ºä¸šåŠ¡é€»è¾‘å…¨éƒ¨åœ¨`actionCreator`é‡Œï¼Œ`reducer`å‡½æ•°é‡Œçš„`type`å€¼å…¨éƒ¨å˜æˆäº†ä¸€å †ç±»ä¼¼`CURD`çš„å‘½åæ–¹å¼ï¼Œ`saveXXModel`ã€`updateXXModelXXField`ã€`setXXX`ã€`deleteXXX`ç­‰çœ‹èµ·æ¥å·²ç»å’Œä¸šåŠ¡é€»è¾‘å…¨ç„¶æ²¡æœ‰ä»»ä½•å…³ç³»çš„å‘½åï¼Œå¤§é‡çš„å……æ–¥åœ¨`reducer`å‡½æ•°é‡Œï¼Œè€Œæˆ‘ä»¬çš„çŠ¶æ€è°ƒè¯•å·¥å…·è®°å½•çš„`type`å€¼æ°æ°å…¨æ˜¯è¿™äº›å‘½åæ–¹å¼ï¼Œä½ åœ¨è°ƒè¯•å·¥å…·é‡Œçœ‹åˆ°å˜è¿è¿‡ç¨‹å¯¹åº”çš„`type`åˆ—è¡¨ï¼Œåªæ˜¯è·å–åˆ°äº†å“ªäº›æ•°æ®è¢«æ”¹å˜äº†çš„ä¿¡æ¯ï¼Œä½†å…¨ç„¶ä¸çŸ¥è¿™äº›çŠ¶æ€æ˜¯ä»å“ªäº›åœ°æ–¹æ´¾å‘äº†`payload`å¯¼è‡´äº†å˜åŒ–ï¼Œç”šè‡³æƒ³çŸ¥é“æ˜¯é‚£äº›UIè§†å›¾çš„ä»€ä¹ˆäº¤äº’åŠ¨ä½œå¯¼è‡´äº†çŠ¶æ€çš„æ”¹å˜ï¼Œä¹Ÿåªèƒ½ä»ä»£ç çš„`reducer`çš„`type`å…³é”®å­—ä½œä¸ºæœç´¢æ¡ä»¶å¼€å§‹ï¼Œåå‘æŸ¥é˜…å…¶ä»–ä»£ç æ–‡ä»¶ã€‚
- è¿˜æœ‰ä¸€ç§æ˜¯è®©`actionCreator`å°½å¯èƒ½çš„è–„ï¼Œæ´¾å‘åŒæ­¥çš„actionå°±ç›´æ¥returnï¼Œå¼‚æ­¥çš„actionä½¿ç”¨thunkå‡½æ•°æˆ–è€…`redux-saga`ç­‰ç¬¬ä¸‰æ–¹åº“åšå¤„ç†ï¼Œæ‹¿åˆ°æ•°æ®éƒ½å°½å¯èƒ½æ—©çš„åšæˆ`action`å¯¹è±¡ï¼Œæ´¾å‘åˆ°`reducer`å‡½æ•°é‡Œï¼Œ
> æ­¤ç§æ¨¡å¼ä¸‹ï¼Œæˆ‘ä»¬çš„`actionCreator`è–„äº†ï¼Œåšçš„äº‹æƒ…å¦‚å…¶åå­—ä¸€æ ·ï¼Œåªæ˜¯è´Ÿè´£äº§ç”Ÿ`action`å¯¹è±¡ï¼ŒåŒæ—¶å› ä¸ºæˆ‘ä»¬å¯¹æ•°æ®å¤„ç†é€»è¾‘åœ¨`reducer`é‡Œäº†ï¼Œæˆ‘ä»¬çš„`type`å€¼å¯ä»¥æ ¹æ®è°ƒç”¨æ–¹çš„åŠ¨æœºæˆ–è€…åœºæ™¯æ¥å‘½åäº†ï¼Œå¦‚`formatTimestamp`ã€`handleNameChanged`ã€`handelFetchedBasicData`ç­‰ï¼Œä½†æ˜¯ç”±äº`redux`çš„æ¶æ„å¯¼è‡´ï¼Œä½ çš„uiè§¦å‘çš„åŠ¨ä½œé¿å…ä¸äº†çš„è¦è¦ç»è¿‡ä¸¤ä¸ªæ­¥éª¤ï¼Œä¸€æ­¥ç»è¿‡`actionCreator`ç”Ÿæˆ`action`ï¼Œç¬¬2æ­¥è¿›è¿‡ç»è¿‡`reducer`å¤„ç†`payload`åˆæˆæ–°çš„`state`ï¼Œæ‰€ä»¥`actionCreator`çš„å‘½åå’Œ`reducerType`çš„å‘½åé€šå¸¸ä¸ºäº†æ–¹ä¾¿ä»¥åé˜…è¯»æ—¶èƒ½å¤Ÿå¸¦å…¥ä¸Šä¸‹æ–‡ä¿¡æ¯å¾ˆæœ‰å¯èƒ½ä¼šå˜æˆä¸€æ ·çš„å‘½åï¼Œå¦‚`fetchProductList`ï¼Œåœ¨`actionCreator`é‡Œå‡ºç°ä¸€éï¼Œç„¶ååœ¨`reducerType`åˆå‡ºç°ä¸€é

### concentåŒ–ç¹ä¸ºç®€çš„reducer
concenté‡Œ`reducer`æ‹…ä»»çš„è§’è‰²å°±æ˜¯è´Ÿè´£è¿”å›ä¸€ä¸ªæ–°çš„ç‰‡æ®µè§†å›¾ï¼Œæ‰€ä»¥ä½ å¯ä»¥è®¤ä¸ºå®ƒå°±æ˜¯ä¸€ä¸ª`partialStateGenerator`å‡½æ•°ï¼Œä½ å¯ä»¥å£°æ˜å…¶ä¸ºæ™®é€šå‡½æ•°
```
//code in fooReducer.js
function fetchProductList(){
}
```
ä¹Ÿå¯ä»¥æ˜¯asyncå‡½æ•°æˆ–è€…generatorå‡½æ•°
```
async function fetchProductList(){
}
```
å¦‚æœï¼Œä½ çš„å‡½æ•°éœ€è¦å‡ æ­¥è¯·æ±‚æ‰èƒ½å®Œæˆå…¨éƒ¨çš„æ¸²æŸ“ï¼Œä½†æ˜¯æ¯ä¸€æ­¥éƒ½éœ€è¦åŠæ—¶è§¦å‘è§†å›¾æ›´æ–°ï¼Œconcentå…è®¸ä½ è‡ªç”±ç»„åˆå‡½æ•°ï¼Œå¦‚æœåŒå±äºä¸€ä¸ªæ¨¡å—é‡Œçš„`reducer`å‡½æ•°ï¼Œç›¸äº’ä¹‹é—´è¿˜å¯ä»¥ç›´æ¥åŸºäºå‡½æ•°ç­¾åæ¥è°ƒç”¨
```javascript
function _setProductList(dataList){
  return {dataList};
}

//è·å–äº§å“åˆ—è¡¨è®¡åŸºç¡€æ•°æ®
async function fetchProductBasicData(payload, moduleState, ctx){
  const dataList = await api.fetchProductBasicData();
  return {dataList};//è¿”å›æ•°æ®ï¼Œè§¦å‘æ¸²æŸ“
  // or ctx.dispatch(_setProductList, dataList);
}

//è·å–äº§å“åˆ—è¡¨è®¡ç»Ÿè®¡æ•°æ®ï¼Œç»Ÿè®¡æ•°æ®è¾ƒæ…¢ï¼Œåˆ†æ‰¹æ‹‰å– (ä¼ªä»£ç )
async function fetchProductStatData(payload, moduleState, ctx){
  const dataList = moduleState.dataList;
  //åšåˆ†æ‰¹æ‹‰å–ç»Ÿè®¡æ•°æ®çš„idsï¼Œé€»è¾‘ç•¥...... 
  const batchIdsList = [];
  const len = batchIds.length;

  for(let i=0; i<len; i++){
    const ids = batchIdsList[i];
    const statDataList = await api.fetchProductBasicData(ids);

    //é€»è¾‘ç•¥...... æ¸¸æ ‡å¼€å§‹å’Œç»“æŸï¼Œæ”¹å˜å¯¹åº”çš„dataçš„ç»Ÿè®¡æ•°æ®
    let len = statDataList.length;
    for(let j=0; j<len; j++){
      dataList[j+cursor].stat = statDataList[j];//èµ‹å€¼ç»Ÿè®¡æ•°æ®
    }
    await ctx.dispatch(_setProductList, dataList);//ä¿®æ”¹dataListæ•°æ®ï¼Œè§¦å‘æ¸²æŸ“
  }
}

//ä¸€ä¸ªå®Œæ•´çš„äº§å“åˆ—è¡¨æ—¢åŒ…å«åŸºç¡€æ•°æ®ã€ä¹ŸåŒ…å«ç»Ÿè®¡æ•°æ®ï¼Œåˆ†ä¸¤æ¬¡æ‹‰å–ï¼Œå…¶ä¸­ç»Ÿè®¡æ•°æ®éœ€è¦å¤šæ¬¡åˆ†æ‰¹æ‹‰å–
async function fetchProductList(payload, moduleState, ctx){
  await ctx.dispatch(fetchProductBasicData);
  await ctx.dispatch(fetchProductStatData);
}
```
ç°åœ¨ä½ åªéœ€è¦è§†å›¾å®ä¾‹é‡Œè°ƒç”¨`$$dispatch`è§¦å‘æ›´æ–°å³å¯
```
//å±äºproductæ¨¡å—çš„å®ä¾‹è°ƒç”¨
this.$$dispatch('fetchProductList');

//å±äºå…¶ä»–æ¨¡å—çš„å®ä¾‹è°ƒç”¨
this.$$dispatch('product/fetchProductList');
```

å¯ä»¥çœ‹åˆ°ï¼Œè¿™æ ·çš„ä»£ç ç»„ç»‡æ–¹å¼ï¼Œæ›´ç¬¦åˆè°ƒç”¨è€…çš„ä½¿ç”¨ç›´è§‰ï¼Œæ²¡æœ‰å¤šä½™çš„æ“ä½œï¼Œç›¸äº’è°ƒç”¨æˆ–è€…å¤šçº§è°ƒç”¨ï¼Œå¯ä»¥æŒ‰ç…§å¼€å‘è€…æœ€ç›´è§‚çš„æ€è·¯ç»„ç»‡ä»£ç ï¼Œå¹¶ä¸”å¾ˆæ–¹ä¾¿åæœŸä¸åœçš„è°ƒæ•´åè€…é‡æ„æ¨¡å—é‡Œçš„reducerã€‚

concentå¼ºè°ƒè¿”å›æ¬²æ›´æ–°çš„ç‰‡æ®µçŠ¶æ€ï¼Œè€Œä¸æ˜¯åˆæˆæ–°çš„çŠ¶æ€è¿”å›ï¼Œä»å·¥ä½œåŸç†æ¥è¯´ï¼Œå› ä¸ºconcentç±»é‡Œæ ‡è®°äº†è§‚å¯Ÿkeyä¿¡æ¯ï¼Œreduceræäº¤çš„çŠ¶æ€è¶Šå°ã€è¶Šç²¾å‡†ï¼Œå°±è¶Šæœ‰åˆ©äºåŠ é€ŸæŸ¥æ‰¾åˆ°å…³å¿ƒè¿™äº›keyå€¼å˜åŒ–çš„å®ä¾‹ï¼Œè¿˜æœ‰å°±æ˜¯concentæ˜¯å…è®¸å¯¹keyå®šä¹‰`watch`å’Œ`computed`å‡½æ•°çš„ï¼Œä¿æŒæäº¤æœ€å°åŒ–çš„çŠ¶æ€ä¸ä¼šè§¦å‘ä¸€äº›å†—ä½™çš„`watch`å’Œ`computed`å‡½æ•°é€»è¾‘ï¼›ä»ä¸šåŠ¡å±‚é¢ä¸Šæ¥è¯´ï¼Œä½ è¿”å›çš„æ–°çŠ¶æ€æ˜¯éœ€è¦ç¬¦åˆå‡½æ•°åæè¿°çš„ï¼Œæˆ‘ä»¬ç›´è§‚çš„è§£è¯»ä¸€æ®µå‡½æ•°æ—¶ï¼Œå¤§ä½“çŸ¥é“åšäº†ä»€ä¹ˆå¤„ç†ï¼Œæœ€ç»ˆè¿”å›ä¸€ä¸ªä»€ä¹ˆæ–°çš„ç‰‡æ®µçŠ¶æ€ç»™concentï¼Œæ˜¯ç¬¦åˆçº¿æ€§æ€ç»´çš„^_^ï¼Œå‰©ä¸‹çš„æ›´æ–°UIçš„é€»è¾‘å°±äº¤ç»™concentå§ã€‚

å¯èƒ½è¯»è€…ç•™æ„åˆ°äº†ï¼Œ`redux`æ‰€æå€¡çš„çº¯å‡½æ•°å®¹æ˜“æµ‹è¯•ã€æ— å‰¯ä½œç”¨çš„ä¼˜åŠ¿å‘¢ï¼Ÿåœ¨concenté‡Œèƒ½å¤Ÿä½“ç°å—ï¼Œå…¶å®è¿™ä¸€ç‚¹æ‹…å¿ƒå®Œå…¨æ²¡æœ‰å¿…è¦ï¼Œå› ä¸ºä½ è§‚å¯Ÿä¸Šé¢çš„reducerç¤ºä¾‹ä»£ç å¯ä»¥å‘ç°ï¼Œå‡½æ•°æœ‰æ— å‰¯ä½œç”¨ï¼Œå®Œå…¨å–å†³äºä½ å£°æ˜å‡½æ•°çš„æ–¹å¼ï¼Œasync(or generator)å°±æ˜¯å‰¯ä½œç”¨å‡½æ•°ï¼Œå¦åˆ™å°±æ˜¯çº¯å‡½æ•°ï¼Œä½ çš„uié‡Œå¯ä»¥ç›´æ¥è°ƒç”¨çº¯å‡½æ•°ï¼Œä¹Ÿå¯ä»¥è°ƒç”¨å‰¯ä½œç”¨å‡½æ•°ï¼Œæ ¹æ®ä½ çš„ä½¿ç”¨åœºæ™¯å…·ä½“å†³å®šï¼Œå‡½æ•°åå°±æ˜¯`type`ï¼Œæ²¡æœ‰äº†`actionCreator`æ˜¯ä¸æ˜¯ä¸–ç•Œæ¸…é™äº†å¾ˆå¤šï¼Ÿ

è¿›ä¸€æ­¥æŒ–æ˜`reducer`æœ¬è´¨ï¼Œä¸Šé¢æåˆ°è¿‡ï¼Œå¯¹äºconcentæ¥è¯´ï¼Œ`reducer`å°±æ˜¯`partialStateGenerator`å‡½æ•°ï¼Œæ‰€ä»¥å¦‚æœè®¨åŒèµ°dispatchæµæ´¾çš„ä½ ï¼Œå¯ä»¥ç›´æ¥å®šä¹‰ä¸€ä¸ªå‡½æ•°ï¼Œç„¶åè°ƒç”¨å®ƒï¼Œè€Œéå¿…éœ€è¦æ”¾ç½®åœ¨æ¨¡å—çš„`reducer`å®šä¹‰ä¸‹ã€‚
```javascript
function inc(payload, moduleState, ctx){
  ctx.dispatch('bar/recordLog');//è¿™é‡Œä¸ä½¿ç”¨awaitï¼Œè¡¨ç¤ºå¼‚æ­¥çš„å»è§¦å‘baræ¨¡å—reduceré‡Œçš„recordLogæ–¹æ³•
  return {count: moduleState.count +1 };
}

@register('Counter', 'counter')(Counter)
class Counter extends Component{
  render(){
    return <div onClick={()=> this.$$invoke(inc}>count: {this.state.count}</div>
  }
}
```

`concent`ä¸ä»…ä¹¦å†™ä½“éªŒå‹å¥½ï¼Œå› ä¸º`concent`æ˜¯ä»¥å¼•ç”¨æ”¶é›†ä¸ºåŸºç¡€æ¥åšçŠ¶æ€ç®¡ç†ï¼Œæ‰€ä»¥åœ¨concentæä¾›çš„çŠ¶æ€è°ƒè¯•å·¥å…·é‡Œå¯ä»¥ç²¾ç¡®çš„å®šä½åˆ°æ¯ä¸€æ¬¡çŠ¶æ€å˜æ›´æäº¤äº†ä»€ä¹ˆçŠ¶æ€ï¼Œè°ƒç”¨äº†å“ªäº›æ–¹æ³•ï¼Œä»¥åŠç”±å“ªäº›å®ä¾‹è§¦å‘ã€‚
![cc-core](https://user-gold-cdn.xitu.io/2019/7/17/16bfec79341b8a44?w=897&h=562&f=png&s=44430)

### reduxå¤æ‚çš„ä½¿ç”¨ä½“éªŒ
å°½ç®¡`redux`æ ¸å¿ƒä»£ç å¾ˆç®€å•ï¼Œæä¾›`composeReducers`ã€`bindActionCreators`ç­‰è¾…åŠ©å‡½æ•°ï¼Œä½œä¸ºæ¡¥æ¥`react`çš„`react-redux`æä¾›`connect`å‡½æ•°ï¼Œéœ€è¦å„ç§æ‰‹å†™`mapStateToProps`å’Œ`mapDispatchToProps`ç­‰æ“ä½œï¼Œæ•´ä¸ªæµç¨‹ä¸‹æ¥ï¼Œå…¶å®å·²ç»è®©ä»£ç æ˜¾å¾—å¾ˆè‡ƒè‚¿äº†ï¼Œæ‰€ä»¥æœ‰äº†`dva`ã€`rematch`ç­‰`redux wrapper`åšäº†æ­¤æ–¹é¢çš„æ”¹è¿›ï¼ŒåŒ–ç¹ä¸ºç®€ï¼Œä½†æ˜¯æ— è®ºæ€ä¹ˆåŒ…è£…ï¼Œä»åº•å±‚ä¸Šçœ‹ï¼Œå¯¹äº`redux`çš„æ›´æ–°æµç¨‹æ¥è¯´ï¼Œä»»ä½•ä¸€ä¸ª`action`æ´¾å‘éƒ½è¦ç»è¿‡æ‰€æœ‰çš„`reducer`ï¼Œ`reducer`è¿”å›çš„çŠ¶æ€éƒ½è¦ç»è¿‡æ‰€æœ‰`connect`åˆ°æ­¤`reducer`å¯¹åº”çŠ¶æ€ä¸Šçš„æ‰€æœ‰ç»„ä»¶ï¼Œç»è¿‡ä¸€è½®æµ…æ¯”è¾ƒï¼ˆè¿™ä¹Ÿæ˜¯ä¸ºä»€ä¹ˆreduxä¸€å®šè¦å€ŸåŠ©è§£æ„è¯­æ³•ï¼Œè¿”å›ä¸€ä¸ªæ–°çš„çŠ¶æ€çš„åŸå› ï¼‰ï¼Œå†³å®šè¦ä¸è¦æ›´æ–°å…¶åŒ…è£¹çš„å­ç»„ä»¶ã€‚
```
const increaseAction = {
  type: 'increase'
};

const mapStateToProps = state => {
  return {value: state.count}
};

const mapDispatchToProps = dispatch => {
  return {
    onIncreaseClick: () => dispatch(increaseAction);
  }
};


const App = connect(
  mapStateToProps,
  mapDispatchToProps
)(Counter);

```
### concentç®€å•ç›´æ¥çš„ä¸Šæ‰‹ä½“éªŒ
æ³¨å†Œæˆä¸ºconcentç±»çš„ç»„ä»¶ï¼Œå¤©ç”Ÿå°±æœ‰æ“ä½œstoreçš„èƒ½åŠ›ï¼Œè€Œä¸”æ•°æ®å°†ç›´æ¥æ³¨å…¥`state`
```
//Counteré‡Œç›´æ¥å¯ä»¥ä½¿ç”¨this.$$dispatch('increase')
class Counter extends Component{
  render(){
    return <div onClick={()=> this.$$dispatch('increase')}>count: {this.state.count}</div>
  }
}

const App = register('Counter', 'counter')(Counter);
```
ä½ å¯ä»¥æ³¨æ„åˆ°ï¼Œconcentç›´æ¥å°†`$$dispatch`æ–¹æ³•ï¼Œç»‘å®šåœ¨thisä¸Šï¼Œå› ä¸ºconcenté»˜è®¤é‡‡ç”¨çš„æ˜¯åå‘ç»§æ‰¿ç­–ç•¥æ¥åŒ…è£¹ä½ çš„ç»„ä»¶ï¼Œè¿™æ ·äº§ç”Ÿæ›´å°‘çš„ç»„ä»¶åµŒå¥—å…³ç³»ä»è€Œä½¿å¾—Domå±‚çº§æ›´å°‘ã€‚

storeçš„`state`ä¹Ÿç›´æ¥æ³¨å…¥äº†thisä¸Šï¼Œè¿™æ˜¯å› ä¸ºä»`setState`è°ƒç”¨å¼€å§‹ï¼Œå°±å…·å¤‡äº†å°†è½¬æ€åŒæ­¥åˆ°`store`çš„èƒ½åŠ›ï¼Œæ‰€ä»¥æ³¨å…¥åˆ°`state`ä¹Ÿæ˜¯é¡ºå…¶è‡ªç„¶çš„äº‹æƒ…ã€‚

å½“ç„¶concentä¹Ÿå…è®¸ç”¨æˆ·åœ¨å®ä¾‹çš„`state`ä¸Šå£°æ˜å…¶ä»–é`store`çš„keyï¼Œè¿™æ ·ä»–ä»¬çš„å€¼å°±æ˜¯ç§æœ‰çŠ¶æ€äº†ï¼Œå¦‚æœç”¨æˆ·ä¸å–œæ¬¢`state`è¢«æ±¡æŸ“ï¼Œä¸å–œæ¬¢åå‘ç»§æ‰¿ç­–ç•¥ï¼ŒåŒæ ·çš„ä¹Ÿå¯ä»¥å†™ä¸º
```
class Counter extends Component{
  constructor(props, context){
    super(props, context);
    this.props.$$attach(this);
  }
  render(){
    return(
      <div onClick={()=> this.props.$$dispatch('increase')}>
        count: {this.props.$$connectedState.counter.count}
      </div>
    )
  }
}

const App = register('Counter', {connect:{counter:'*'}, isPropsProxy:true} )(Counter);
```

## vs mobx
`mobx`æ˜¯ä¸€ä¸ªå‡½æ•°å“åº”å¼ç¼–ç¨‹çš„åº“ï¼Œæä¾›çš„æ¡¥æ¥åº“`mobx-react`å°†`react`å˜æˆå½»åº•çš„å“åº”å¼ç¼–ç¨‹æ¨¡å¼ï¼Œå› ä¸º`mobx`å°†å®šä¹‰çš„çŠ¶æ€çš„è½¬å˜ä¸ºå¯è§‚å¯Ÿå¯¹è±¡ï¼Œæ‰€ä»¥
ç”¨æˆ·åªéœ€è¦ä¿®æ”¹æ•°æ®ï¼Œ`mobx`ä¼šè‡ªåŠ¨å°†å¯¹åº”çš„è§†å›¾æ›´æ–°ï¼Œæ‰€ä»¥æœ‰äººæˆç§°`mobx`å°†`react`å˜æˆç±»ä¼¼`vue`çš„ç¼–å†™ä½“éªŒï¼Œæ•°æ®è‡ªåŠ¨æ˜ å°„è§†å›¾ï¼Œæ— éœ€æ˜¾ç¤ºçš„è°ƒç”¨`setState`äº†ã€‚

æœ¬è´¨ä¸Šæ¥è¯´ï¼Œæ‰€æœ‰çš„`mvvm`æ¡†æ¶éƒ½åœ¨å›´ç»•ç€æ•°æ®å’Œè§†å›¾åšæ–‡ç« ï¼ŒreactæŠŠå•é¡¹æ•°æ®æµåšåˆ°äº†æè‡´ï¼Œ`mobx`ä¸º`react`æ‰“ä¸Šæ•°æ®è‡ªåŠ¨æ˜ å°„è§†å›¾çš„è¡¥ä¸ï¼Œæåˆ°è‡ªåŠ¨æ˜ å°„ï¼Œè‡ªåŠ¨æ˜¯å…³é”®ï¼Œæ¡†æ¶æ€ä¹ˆæ„ŸçŸ¥åˆ°æ•°æ®å˜äº†å‘¢ï¼Ÿ`mobx`é‡‡ç”¨å’Œ`vue`ä¸€æ ·çš„æ€è·¯ï¼Œé‡‡ç”¨`push`æ¨¡å¼æ¥åšå˜åŒ–ä¾¦æµ‹ï¼Œå³å¯¹æ•°æ®`getter`å’Œ`setter`åšæ‹¦æˆªï¼Œå½“ç”¨æˆ·ä¿®æ”¹æ•°æ®é‚£ä¸€åˆ»ï¼Œæ¡†æ¶å°±çŸ¥é“æ•°æ®å˜äº†ï¼Œè€Œ`react`å’Œæˆ‘ä»¬å½“ä¸‹ç«çƒ­çš„å°ç¨‹åºç­‰é‡‡ç”¨çš„`pull`æ¨¡å¼æ¥åšå˜åŒ–ä¾¦æµ‹ï¼Œæš´éœ²`setState`å’Œ`setData`æ¥å£ç»™ç”¨æˆ·ï¼Œè®©ç”¨æˆ·ä¸»åŠ¨æäº¤å˜æ›´æ•°æ®ï¼Œæ‰çŸ¥é“æ•°æ®å‘ç”Ÿäº†å˜åŒ–ã€‚

`concent`æœ¬è´¨ä¸Šæ¥è¯´æ²¡æœ‰æ”¹å˜`react`çš„å·¥ä½œæ¨¡å¼ï¼Œä¾ç„¶é‡‡ç”¨çš„æ˜¯`pull`æ¨¡å¼æ¥åšå˜åŒ–ä¾¦æµ‹ï¼Œå”¯ä¸€ä¸åŒçš„æ˜¯ï¼Œè®©`pull`çš„æµç¨‹æ›´åŠ æ™ºèƒ½ï¼Œå½“ç”¨æˆ·çš„ç»„ä»¶å®ä¾‹åˆ›å»ºå¥½çš„é‚£ä¸€åˆ»ï¼Œ`concent`å·²çŸ¥é“å¦‚ä¸‹ä¿¡æ¯ï¼š
- å®ä¾‹å±äºå“ªä¸ªæ¨¡å—
- å®ä¾‹è§‚å¯Ÿè¿™ä¸ªæ¨¡å—çš„å“ªäº›keyå€¼å˜åŒ–
- å®ä¾‹è¿˜é¢å¤–è¿æ¥å…¶ä»–å“ªäº›æ¨¡å—

åŒæ—¶å®ä¾‹çš„å¼•ç”¨å°†è¢«æ”¶é›†åˆ°å¹¶ä¿ç®¡èµ·æ¥ï¼Œç›´åˆ°å¸è½½æ‰ä¼šè¢«é‡Šæ”¾ã€‚

æ‰€ä»¥å¯ä»¥ç”¨0æ”¹é€ æˆæœ¬çš„æ–¹å¼ï¼Œç›´æ¥å°†ä½ çš„reactä»£ç æ¥å…¥åˆ°`concent`ï¼Œç„¶åæ”¯æŒç”¨æˆ·å¯ä»¥æ¸è¿›å¼çš„åˆ†ç¦»ä½ çš„uiå’Œä¸šåŠ¡é€»è¾‘ã€‚

### éœ€è¦è‡ªåŠ¨æ˜ å°„å—
è¿™é‡Œæˆ‘ä»¬å…ˆæŠŠé—®é¢˜å…ˆæå‡ºæ¥ï¼Œæˆ‘ä»¬çœŸçš„éœ€è¦è‡ªåŠ¨æ˜ å°„å—ï¼Ÿ

å½“åº”ç”¨è¶Šæ¥è¶Šå¤§ï¼Œæ¨¡å—è¶Šæ¥è¶Šå¤šçš„æ—¶å€™ï¼Œç›´æ¥ä¿®æ”¹æ•°æ®å¯¼è‡´å¾ˆå¤šä¸ç¡®å®šçš„é¢å¤–å› ç´ äº§ç”Ÿè€Œæ— æ³•è¿½æŸ¥ï¼Œæ‰€ä»¥`vue`æä¾›äº†`vuex`æ¥å¼•å¯¼å’Œè§„èŒƒç”¨æˆ·åœ¨å¤§å‹åº”ç”¨çš„ä¿®æ”¹çŠ¶æ€çš„æ–¹å¼ï¼Œè€Œ`mobx`ä¹Ÿæä¾›äº†`mobx-state-tree`æ¥çº¦æŸç”¨æˆ·çš„æ•°æ®ä¿®æ”¹è¡Œä¸ºï¼Œé€šè¿‡ç»Ÿä¸€èµ°`action`çš„æ–¹å¼æ¥è®©æ•´ä¸ªä¿®æ”¹æµç¨‹å¯è¿½æŸ¥ï¼Œå¯è°ƒè¯•ã€‚

### æ”¹é€ æˆæœ¬
æ‰€ä»¥åœ¨å¤§å‹çš„åº”ç”¨é‡Œï¼Œæˆ‘ä»¬éƒ½å¸Œæœ›è§„èŒƒç”¨æˆ·ä¿®æ”¹æ•°æ®çš„æ–¹å¼ï¼Œé‚£ä¹ˆ`concent`ä»éª¨å­é‡Œä¸º`react`è€Œæ‰“é€ çš„ä¼˜åŠ¿å°†ä½“ç°å‡ºæ¥äº†ï¼Œå¯ä»¥ä»`setState`å¼€å§‹äº«å—åˆ°çŠ¶æ€ç®¡ç†å¸¦æ¥çš„å¥½å¤„ï¼Œæ— éœ€ç”¨æˆ·æ¥å…¥æ›´å¤šçš„è¾…åŠ©å‡½æ•°å’Œå¤§é‡çš„è£…é¥°å™¨å‡½æ•°ï¼ˆé’ˆå¯¹å­—æ®µçº§åˆ«çš„å®šä¹‰ï¼‰ï¼Œä»¥åŠå®Œç¾çš„æ”¯æŒç”¨æˆ·æ¸è¿›å¼çš„é‡æ„ï¼Œä¼˜é›…çš„è§£è€¦å’Œåˆ†ç¦»ä¸šåŠ¡é€»è¾‘ä¸uiè§†å›¾ï¼Œå†™å‡ºçš„ä»£ç å§‹ç»ˆè¿˜æ˜¯`react`å‘³é“çš„ä»£ç ã€‚

## ç»“è¯­
`concent`å›´ç»•`react`æä¾›ä¸€ç§äº†æ›´èˆ’é€‚ã€æ›´ç¬¦åˆé˜…è¯»ç›´è§‰çš„ç¼–ç ä½“éªŒï¼ŒåŒæ—¶æ–°å¢äº†æ›´å¤šçš„ç‰¹æ€§ï¼Œä¸ºä¹¦å†™`react`ç»„ä»¶å¸¦æ¥æ›´å¤šçš„è¶£å‘³æ€§å’Œå®ç”¨æ€§ï¼Œä¸ç®¡æ˜¯ä¼ ç»Ÿçš„`class`æµæ´¾ï¼Œè¿˜æ˜¯æ–°å…´çš„`function`æµæ´¾ï¼Œéƒ½èƒ½å¤Ÿåœ¨`concent`é‡Œäº«å—åˆ°ç»Ÿä¸€çš„ç¼–ç ä½“éªŒã€‚

ä¾æ‰˜äºconcentçš„ä»¥ä¸‹3ç‚¹æ ¸å¿ƒå·¥ä½œåŸç†ï¼š
- å¼•ç”¨æ”¶é›†
- è§‚å¯Ÿkeyæ ‡è®°
- çŠ¶æ€å¹¿æ’­

åŸºäºå¼•ç”¨æ”¶é›†å’Œè§‚å¯Ÿkeyæ ‡è®°ï¼Œå°±å¯ä»¥åšåˆ°çƒ­ç‚¹æ›´æ–°è·¯å¾„ç¼“å­˜ï¼Œç†è®ºä¸Šæ¥è¯´ï¼ŒæŸä¸€ä¸ªreducerå¦‚æœè¿”å›çš„å¾…æ›´æ–°ç‰‡æ®µå¯¹è±¡å½¢çŠ¶æ˜¯ä¸å˜çš„ï¼Œåˆæ¬¡è§¦å‘æ¸²æŸ“çš„æ—¶å€™è¿˜æœ‰ä¸€ä¸ªæŸ¥æ‰¾çš„è¿‡ç¨‹ï¼ˆå°½ç®¡å·²ç»éå¸¸å¿«ï¼‰ï¼Œåé¢çš„è¯ç›¸åŒçš„reducerè°ƒç”¨éƒ½å¯ä»¥ç›´æ¥å‘½ä¸­å¹¶æ›´æ–°ï¼Œæœ‰ç‚¹ç±»ä¼¼v8é‡Œçš„çƒ­ç‚¹ä»£ç ç¼“å­˜ï¼Œä¸è¿‡concentç¼“å­˜çš„reducerè¿”å›æ•°æ®å½¢çŠ¶å’Œå¼•ç”¨ä¹‹é—´çš„å…³ç³»ï¼Œæ‰€ä»¥åº”ç”¨å¯ä»¥è¶Šè¿è¡Œè¶Šå¿«ï¼Œå°¤å…¶æ˜¯é‚£ç§ä¸€ä¸ªç•Œé¢ä¸Šç™¾ä¸ªç»„ä»¶ï¼Œnä¸ªæ¨¡å—çš„åº”ç”¨ï¼Œå°†ä½“ç°å‡ºæ›´å¤§çš„ä¼˜åŠ¿ï¼Œè¿™æ˜¯ä¸‹ä¸€ä¸ªç‰ˆæœ¬concentæ­£åœ¨åšçš„ä¼˜åŒ–é¡¹ï¼Œä¸ºç”¨æˆ·å¸¦æ¥æ›´å¿«çš„æ€§èƒ½è¡¨ç°å’Œæ›´å¥½çš„ç¼–å†™ä½“éªŒæ˜¯`concent`å§‹ç»ˆè¿½æ±‚çš„ç›®æ ‡ã€‚
 
## å½©è›‹ [Ant Design Pro powered by concent](https://github.com/concentjs/antd-pro-concent) ğŸ‰ğŸ‰ğŸ‰
å°½ç®¡`concent`æœ‰ä¸€å¥—è‡ªå·±çš„æ ‡å‡†çš„å¼€å‘æ–¹å¼ï¼Œä½†æ˜¯å…¶çµæ´»çš„æ¶æ„è®¾è®¡éå¸¸çš„å®¹æ˜“ä¸ç°æœ‰çš„é¡¹ç›®é›†æˆï¼Œæ­¤æ¡ˆä¾‹å°†`concent`æ¥å…¥åˆ°`antd-pro`(jsç‰ˆæœ¬çš„æœ€åä¸€ä¸ªç‰ˆæœ¬2.2.0)ï¼Œæºä»£ç ä¸šåŠ¡é€»è¾‘æ²¡æœ‰åšä»»ä½•æ”¹åŠ¨ï¼Œåªæ˜¯åšäº†å¦‚ä¸‹ä¿®æ”¹ï¼Œlint-stagedéªŒæ”¶é€šè¿‡ï¼š
- åœ¨srcç›®å½•ä¸‹åŠ å…¥runConcentè„šæœ¬
- models å…¨éƒ¨æ›¿æ¢ä¸ºconcentæ ¼å¼å®šä¹‰çš„ï¼Œå› ä¸ºumiä¼šè‡ªåŠ¨è¯»å–modelæ–‡ä»¶å¤¹å®šä¹‰æ³¨å…¥åˆ°dvaé‡Œï¼Œæ‰€ä»¥æ‰€æœ‰concentç›¸å…³çš„modeléƒ½æ”¾åœ¨äº†model-ccæ–‡ä»¶å¤¹ä¸‹
- ç»„ä»¶å±‚çš„è£…é¥°å™¨ï¼Œå…¨éƒ¨ç”¨`concent`æ›¿æ¢äº†`dva`ï¼Œå¹¶åšäº†å°‘è®¸è¯­æ³•çš„ä¿®æ”¹
- å¼•å…¥`concent-plugin-loading`æ’ä»¶ï¼Œç”¨äºè‡ªåŠ¨è®¾ç½®`reducer`å‡½æ•°çš„å¼€å§‹å’Œç»“æŸçŠ¶æ€
- å¼•å…¥`react-router-concent`ï¼Œç”¨äºè¿æ¥`react-router`å’Œ`concent`
- å¼•å…¥`concent-middleware-web-devtool`(ç¬¬ä¸€ä¸ªå¯ç”¨ç‰ˆæœ¬ï¼Œæ¯”è¾ƒç®€é™‹^_^)ï¼Œç”¨äºæŸ¥çœ‹çŠ¶æ€`concent`çŠ¶æ€å˜è¿è¿‡ç¨‹
> æ³¨æ„ï¼Œè¿è¡ŒæœŸé¡¹ç›®åï¼Œå¯ä»¥æ‰“å¼€consoleï¼Œè¾“å…¥`sss`,æŸ¥çœ‹storeï¼Œè¾“å…¥`cc.dispatch`æˆ–`cc.reducer.**`ç›´æ¥è§¦å‘è°ƒç”¨ï¼Œæ›´å¤šapiè¯·ç§»æ­¥[concentå®˜ç½‘æ–‡æ¡£](https://concentjs.github.io/concent-site/)æŸ¥çœ‹ï¼Œæ›´å¤šantd-proçŸ¥è¯†äº†è§£è¯·ç§»æ­¥[antd-proå®˜ç½‘](https://pro.ant.design/index-cn)

## å¦‚ä½•è¿è¡Œ
* ä¸‹è½½æºä»£ç 
```
git clone git@github.com:concentjs/antd-pro-concent.git
```
* è¿›å…¥æ ¹ç›®å½•ï¼Œå®‰è£…ä¾èµ–åŒ…
```
npm i
```
* è¿è¡Œå’Œè°ƒè¯•é¡¹ç›®
```
npm start
```
> é»˜è®¤srcç›®å½•ä¸‹æ”¾ç½®çš„æ˜¯`concent`ç‰ˆæœ¬çš„æºä»£ç ï¼Œå¦‚éœ€è¿è¡Œ`dva`ç‰ˆæœ¬ï¼Œæ‰§è¡Œ`npm run start:old`ï¼Œåˆ‡æ¢ä¸º`concent`,æ‰§è¡Œ`npm run start:cc`

## å…¶ä»–
happy coding, enjoy concent ^_^   
[æ¬¢è¿star](https://github.com/concentjs/concent)
___
<div align="center">

An out-of-box UI solution for enterprise applications as a React boilerplate.

![](https://user-gold-cdn.xitu.io/2019/7/17/16bfec863f99054c?w=3104&h=1914&f=png&s=573962)